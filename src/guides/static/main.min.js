import{Utils}from"../../common.js";var delay=Utils.delay;var loadMarkdown=Utils.loadMarkdown;var setUpTabs=Utils.setUpTabs;var changeUrl=Utils.changeUrl;await((async()=>{let e=0;function t(){let e=null;const t=document.getElementsByClassName("wrapper")[0];Array.from(t.children).forEach((t=>{if(e!==null&&e.getBoundingClientRect().height<t.getBoundingClientRect().height){e=t}if(e===null){e=t}console.log(t)}));if(e!==null){t.style.height=`${e.getBoundingClientRect().height}px`}}async function a(a){const n=document.getElementsByClassName("wrapper")[0];const i=n.children[e];const d=n.children[a];i.classList.add("page_hiding");d.classList.add("notransition");d.classList.add("page_showing");d.classList.remove("notransition");d.classList.remove("page_hidden");d.classList.add("page_visible");await delay(500);i.classList.remove("page_hiding");i.classList.add("page_hidden");d.classList.remove("page_showing");d.classList.remove("page_visible");e=a;t()}async function n(){const e=await fetch("/guides/list");if(!e.ok)throw new Error("Failed to fetch guides list");return await e.json()}setUpTabs();t();const i=document.getElementById("guides_list");document.getElementById("guide_back").addEventListener("click",(async()=>{await a(0);document.getElementById("guide").innerHTML="";changeUrl("/guides")}));window.addEventListener("popstate",(async()=>{const e=new URLSearchParams(window.location.search);const t=e.get("guide");if(t!==null){try{await loadMarkdown(t,document.getElementById("guide"))}catch(e){await loadMarkdown("ERROR.md",document.getElementById("guide"))}await a(1)}else{await a(0);document.getElementById("guide").innerHTML=""}}));const d=await n();i.innerHTML="";for(const e of d){const n=document.createElement("div");n.classList.add("guide","toucheffect");const d=document.createElement("span");d.classList.add("material-symbols","guide_icon");d.textContent=e.header.Icon||"description";n.appendChild(d);const s=document.createElement("div");s.classList.add("guide_title");s.textContent=e.header.DisplayName;n.appendChild(s);i.appendChild(n);n.addEventListener("click",(async()=>{changeUrl(`/guides/?guide=${e.name}`);await loadMarkdown(e.name,document.getElementById("guide"));await a(1)}));t()}const s=new URLSearchParams(window.location.search);const o=s.get("guide");if(o!==null){try{await loadMarkdown(o,document.getElementById("guide"))}catch(e){await loadMarkdown("ERROR.md",document.getElementById("guide"))}await a(1)}}))();