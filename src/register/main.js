import{Utils}from"../common.js";var id=Utils.id;var query=Utils.query;(()=>{const e=id("username");const t=id("password");const s=id("confirm-password");const a=id("email");const o=query(".auth-button");const n=id("error-message");id("registerForm").addEventListener("submit",(async function(i){i.preventDefault();const r=e.value;const l=a.value;const c=t.value;const d=s.value;n.style.display="none";if(c!==d){n.textContent="Passwords do not match";n.style.display="block";return}if(c.length<6){n.textContent="Password must be at least 6 characters long";n.style.display="block";return}o.disabled=true;o.textContent="Registering...";try{const e=await fetch("/api/auth/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:r,email:l,password:c})});const t=await e.json();if(e.ok){n.textContent="Registration successful! Redirecting to login...";n.className="success-message";n.style.display="block";setTimeout((()=>{window.location.href="/login"}),2e3)}else{n.textContent=t.detail||"Registration failed";n.className="error-message";n.style.display="block"}}catch(e){n.textContent="Network error. Please try again.";n.className="error-message";n.style.display="block"}finally{o.disabled=false;o.textContent="Register"}}))})();